{"ast":null,"code":"var _jsxFileName = \"D:\\\\Airticket\\\\frontend\\\\src\\\\components\\\\PaymentForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport './Payment.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentForm = ({\n  amount = 200000,\n  currency = 'vnd',\n  ticketId = 'VN001'\n}) => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const handlePayment = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      // ‚ö†Ô∏è Ch·ªâ test: g·ªçi tr·ª±c ti·∫øp Stripe REST API v·ªõi secret key (d√πng t·∫°m)\n      const response = await fetch('https://api.stripe.com/v1/checkout/sessions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer sk_test_51SGeKJDqg8pnfinD5h6yRu3GckV8Fujea2FVeLSTUygXDird55JsQR27J2y1tgA1ShBhN4vigQIDc4wMd1n8Be3w00KxHOUhyA`,\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: new URLSearchParams({\n          'payment_method_types[]': 'card',\n          'mode': 'payment',\n          'line_items[0][price_data][currency]': currency,\n          'line_items[0][price_data][product_data][name]': `V√© m√°y bay #${ticketId}`,\n          'line_items[0][price_data][unit_amount]': amount.toString(),\n          'line_items[0][quantity]': '1',\n          'success_url': 'http://localhost:3000/payment-success',\n          'cancel_url': 'http://localhost:3000/payment-cancel'\n        })\n      });\n      const data = await response.json();\n      if (data.url) {\n        window.location.href = data.url;\n      } else {\n        var _data$error;\n        console.error('Stripe error:', data);\n        setError(((_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.message) || 'Kh√¥ng th·ªÉ t·∫°o Checkout Session');\n      }\n    } catch (err) {\n      console.error(err);\n      setError('L·ªói k·∫øt n·ªëi Stripe');\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"T\\u1ED5ng ti\\u1EC1n:\", ' ', new Intl.NumberFormat('vi-VN', {\n        style: 'currency',\n        currency: 'VND'\n      }).format(amount)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#f8d7da',\n        color: '#721c24',\n        padding: '10px',\n        borderRadius: '4px',\n        marginBottom: '10px'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      disabled: loading,\n      style: {\n        width: '100%',\n        padding: '15px',\n        background: loading ? '#6c757d' : '#007bff',\n        color: 'white',\n        border: 'none',\n        borderRadius: '6px',\n        fontSize: '16px',\n        fontWeight: '600',\n        cursor: loading ? 'not-allowed' : 'pointer'\n      },\n      children: loading ? 'ƒêang x·ª≠ l√Ω...' : 'Thanh to√°n qua Stripe'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-notice\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDD12 Thanh to\\xE1n test b\\u1EB1ng Stripe Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \"Kh\\xF4ng c\\u1EA7n backend\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentForm, \"xQswdwBNg1Q8V6Q6QDVeneBDwwg=\");\n_c = PaymentForm;\nexport default PaymentForm;\nvar _c;\n$RefreshReg$(_c, \"PaymentForm\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","PaymentForm","amount","currency","ticketId","_s","loading","setLoading","error","setError","handlePayment","response","fetch","method","headers","body","URLSearchParams","toString","data","json","url","window","location","href","_data$error","console","message","err","className","children","Intl","NumberFormat","style","format","fileName","_jsxFileName","lineNumber","columnNumber","background","color","padding","borderRadius","marginBottom","onClick","disabled","width","border","fontSize","fontWeight","cursor","_c","$RefreshReg$"],"sources":["D:/Airticket/frontend/src/components/PaymentForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport './Payment.css';\n\nconst PaymentForm = ({ amount = 200000, currency = 'vnd', ticketId = 'VN001' }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handlePayment = async () => {\n    setLoading(true);\n    setError('');\n\n    try {\n      // ‚ö†Ô∏è Ch·ªâ test: g·ªçi tr·ª±c ti·∫øp Stripe REST API v·ªõi secret key (d√πng t·∫°m)\n      const response = await fetch('https://api.stripe.com/v1/checkout/sessions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer sk_test_51SGeKJDqg8pnfinD5h6yRu3GckV8Fujea2FVeLSTUygXDird55JsQR27J2y1tgA1ShBhN4vigQIDc4wMd1n8Be3w00KxHOUhyA`,\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: new URLSearchParams({\n          'payment_method_types[]': 'card',\n          'mode': 'payment',\n          'line_items[0][price_data][currency]': currency,\n          'line_items[0][price_data][product_data][name]': `V√© m√°y bay #${ticketId}`,\n          'line_items[0][price_data][unit_amount]': amount.toString(),\n          'line_items[0][quantity]': '1',\n          'success_url': 'http://localhost:3000/payment-success',\n          'cancel_url': 'http://localhost:3000/payment-cancel',\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.url) {\n        window.location.href = data.url;\n      } else {\n        console.error('Stripe error:', data);\n        setError(data.error?.message || 'Kh√¥ng th·ªÉ t·∫°o Checkout Session');\n      }\n    } catch (err) {\n      console.error(err);\n      setError('L·ªói k·∫øt n·ªëi Stripe');\n    }\n\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"payment-form\">\n      <h3>\n        T·ªïng ti·ªÅn:{' '}\n        {new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount)}\n      </h3>\n\n      {error && (\n        <div\n          style={{\n            background: '#f8d7da',\n            color: '#721c24',\n            padding: '10px',\n            borderRadius: '4px',\n            marginBottom: '10px',\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      <button\n        onClick={handlePayment}\n        disabled={loading}\n        style={{\n          width: '100%',\n          padding: '15px',\n          background: loading ? '#6c757d' : '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '6px',\n          fontSize: '16px',\n          fontWeight: '600',\n          cursor: loading ? 'not-allowed' : 'pointer',\n        }}\n      >\n        {loading ? 'ƒêang x·ª≠ l√Ω...' : 'Thanh to√°n qua Stripe'}\n      </button>\n\n      <div className=\"payment-notice\">\n        <p>üîí Thanh to√°n test b·∫±ng Stripe Checkout</p>\n        <small>Kh√¥ng c·∫ßn backend</small>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}