{"ast":null,"code":"var _jsxFileName = \"D:\\\\Airticket\\\\frontend\\\\src\\\\components\\\\PaymentForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport './Payment.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentForm = ({\n  amount,\n  currency,\n  ticketId\n}) => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [checkoutUrl, setCheckoutUrl] = useState('');\n  const handleCreateCheckout = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      // ‚ö†Ô∏è TEST ONLY: Stripe Secret Key (ch·ªâ d√πng th·ª≠, kh√¥ng commit l√™n git)\n      const STRIPE_SECRET_KEY = 'sk_test_your_secret_key_here';\n      const response = await fetch('https://api.stripe.com/v1/checkout/sessions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${STRIPE_SECRET_KEY}`,\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: new URLSearchParams({\n          'payment_method_types[0]': 'card',\n          'mode': 'payment',\n          'line_items[0][price_data][currency]': currency || 'vnd',\n          'line_items[0][price_data][product_data][name]': `Thanh to√°n v√© #${ticketId || 'demo'}`,\n          'line_items[0][price_data][unit_amount]': amount || '2000000',\n          // VND -> t√≠nh b·∫±ng ƒë·ªìng nh·ªè nh·∫•t\n          'line_items[0][quantity]': '1',\n          'success_url': 'http://localhost:3000/payment-success',\n          'cancel_url': 'http://localhost:3000/payment-cancel'\n        })\n      });\n      const data = await response.json();\n      if (data.url) {\n        setCheckoutUrl(data.url);\n        // üëâ Redirect th·∫≥ng sang Stripe Checkout:\n        window.location.href = data.url;\n      } else {\n        var _data$error;\n        console.error(data);\n        setError(((_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.message) || 'Kh√¥ng nh·∫≠n ƒë∆∞·ª£c URL thanh to√°n');\n      }\n    } catch (err) {\n      console.error(err);\n      setError('L·ªói khi t·∫°o phi√™n thanh to√°n');\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Thanh to\\xE1n v\\xE9 m\\xE1y bay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"T\\u1ED5ng ti\\u1EC1n:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: new Intl.NumberFormat('vi-VN', {\n          style: 'currency',\n          currency: 'VND'\n        }).format(amount)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      style: {\n        background: '#f8d7da',\n        color: '#721c24',\n        padding: '10px',\n        borderRadius: '4px',\n        marginBottom: '15px',\n        border: '1px solid #f5c6cb'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"L\\u1ED7i:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), \" \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleCreateCheckout,\n      disabled: loading,\n      className: \"payment-button\",\n      style: {\n        width: '100%',\n        padding: '15px',\n        background: loading ? '#6c757d' : '#007bff',\n        color: 'white',\n        border: 'none',\n        borderRadius: '6px',\n        fontSize: '16px',\n        fontWeight: '600',\n        cursor: loading ? 'not-allowed' : 'pointer',\n        marginTop: '20px'\n      },\n      children: loading ? 'ƒêang t·∫°o phi√™n...' : 'Thanh to√°n v·ªõi Stripe'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), checkoutUrl && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '15px'\n      },\n      children: [\"Ho\\u1EB7c m\\u1EDF th\\u1EE7 c\\xF4ng: \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: checkoutUrl,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: checkoutUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-notice\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDD12 Thanh to\\xE1n \\u0111\\u01B0\\u1EE3c b\\u1EA3o m\\u1EADt b\\u1EDFi Stripe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \"Th\\xF4ng tin th\\u1EBB \\u0111\\u01B0\\u1EE3c m\\xE3 h\\xF3a v\\xE0 b\\u1EA3o v\\u1EC7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentForm, \"K3UttpckbmHv8iOV1jA2h4SM1vQ=\");\n_c = PaymentForm;\nexport default PaymentForm;\nvar _c;\n$RefreshReg$(_c, \"PaymentForm\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","PaymentForm","amount","currency","ticketId","_s","loading","setLoading","error","setError","checkoutUrl","setCheckoutUrl","handleCreateCheckout","STRIPE_SECRET_KEY","response","fetch","method","headers","body","URLSearchParams","data","json","url","window","location","href","_data$error","console","message","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Intl","NumberFormat","style","format","background","color","padding","borderRadius","marginBottom","border","onClick","disabled","width","fontSize","fontWeight","cursor","marginTop","target","rel","_c","$RefreshReg$"],"sources":["D:/Airticket/frontend/src/components/PaymentForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport './Payment.css';\n\nconst PaymentForm = ({ amount, currency, ticketId }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [checkoutUrl, setCheckoutUrl] = useState('');\n\n  const handleCreateCheckout = async () => {\n    setLoading(true);\n    setError('');\n\n    try {\n      // ‚ö†Ô∏è TEST ONLY: Stripe Secret Key (ch·ªâ d√πng th·ª≠, kh√¥ng commit l√™n git)\n      const STRIPE_SECRET_KEY = 'sk_test_your_secret_key_here';\n\n      const response = await fetch('https://api.stripe.com/v1/checkout/sessions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${STRIPE_SECRET_KEY}`,\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: new URLSearchParams({\n          'payment_method_types[0]': 'card',\n          'mode': 'payment',\n          'line_items[0][price_data][currency]': currency || 'vnd',\n          'line_items[0][price_data][product_data][name]': `Thanh to√°n v√© #${ticketId || 'demo'}`,\n          'line_items[0][price_data][unit_amount]': amount || '2000000', // VND -> t√≠nh b·∫±ng ƒë·ªìng nh·ªè nh·∫•t\n          'line_items[0][quantity]': '1',\n          'success_url': 'http://localhost:3000/payment-success',\n          'cancel_url': 'http://localhost:3000/payment-cancel',\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.url) {\n        setCheckoutUrl(data.url);\n        // üëâ Redirect th·∫≥ng sang Stripe Checkout:\n        window.location.href = data.url;\n      } else {\n        console.error(data);\n        setError(data.error?.message || 'Kh√¥ng nh·∫≠n ƒë∆∞·ª£c URL thanh to√°n');\n      }\n    } catch (err) {\n      console.error(err);\n      setError('L·ªói khi t·∫°o phi√™n thanh to√°n');\n    }\n\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"payment-form\">\n      <h3>Thanh to√°n v√© m√°y bay</h3>\n      <p>\n        T·ªïng ti·ªÅn:{' '}\n        <strong>\n          {new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount)}\n        </strong>\n      </p>\n\n      {error && (\n        <div className=\"error-message\" style={{\n          background: '#f8d7da',\n          color: '#721c24',\n          padding: '10px',\n          borderRadius: '4px',\n          marginBottom: '15px',\n          border: '1px solid #f5c6cb'\n        }}>\n          <strong>L·ªói:</strong> {error}\n        </div>\n      )}\n\n      <button\n        onClick={handleCreateCheckout}\n        disabled={loading}\n        className=\"payment-button\"\n        style={{\n          width: '100%',\n          padding: '15px',\n          background: loading ? '#6c757d' : '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '6px',\n          fontSize: '16px',\n          fontWeight: '600',\n          cursor: loading ? 'not-allowed' : 'pointer',\n          marginTop: '20px'\n        }}\n      >\n        {loading ? 'ƒêang t·∫°o phi√™n...' : 'Thanh to√°n v·ªõi Stripe'}\n      </button>\n\n      {checkoutUrl && (\n        <p style={{ marginTop: '15px' }}>\n          Ho·∫∑c m·ªü th·ªß c√¥ng: <a href={checkoutUrl} target=\"_blank\" rel=\"noreferrer\">{checkoutUrl}</a>\n        </p>\n      )}\n\n      <div className=\"payment-notice\">\n        <p>üîí Thanh to√°n ƒë∆∞·ª£c b·∫£o m·∫≠t b·ªüi Stripe</p>\n        <small>Th√¥ng tin th·∫ª ƒë∆∞·ª£c m√£ h√≥a v√† b·∫£o v·ªá</small>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}