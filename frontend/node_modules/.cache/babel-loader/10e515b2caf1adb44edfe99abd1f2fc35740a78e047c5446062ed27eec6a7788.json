{"ast":null,"code":"var _jsxFileName = \"D:\\\\Airticket\\\\frontend\\\\src\\\\components\\\\SeatLayout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './SeatLayout.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SeatLayout = ({\n  flightId,\n  selectedSeats = [],\n  onSeatSelect,\n  passengerCount = 1,\n  maxSelections = 1,\n  flightPrices = null,\n  // Th√™m th√¥ng tin gi√° v√© t·ª´ flight\n  onSeatPriceChange // Callback khi gi√° gh·∫ø thay ƒë·ªïi\n}) => {\n  _s();\n  const [conflictWarning, setConflictWarning] = useState(null);\n\n  // Ki·ªÉm tra xung ƒë·ªôt gh·∫ø sau m·ªói l·∫ßn refresh\n  useEffect(() => {\n    if (selectedSeats.length > 0 && seatLayout) {\n      const conflictingSeats = selectedSeats.filter(seatId => {\n        const seat = getSeatById(seatId);\n        return seat && seat.status === 'booked';\n      });\n      if (conflictingSeats.length > 0) {\n        setConflictWarning(`Gh·∫ø ${conflictingSeats.join(', ')} ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t b·ªüi ng∆∞·ªùi kh√°c. Vui l√≤ng ch·ªçn gh·∫ø kh√°c.`);\n      } else {\n        setConflictWarning(null);\n      }\n    }\n  }, [selectedSeats, seatLayout]);\n  useEffect(() => {\n    const fetchSeatLayout = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`http://localhost:8080/api/v1/seat-layout/flights/${flightId}/seats`);\n        if (response.ok) {\n          const data = await response.json();\n          setSeatLayout(data.data);\n        } else {\n          setError('Kh√¥ng th·ªÉ t·∫£i s∆° ƒë·ªì gh·∫ø');\n        }\n      } catch (error) {\n        console.error('L·ªói t·∫£i s∆° ƒë·ªì gh·∫ø:', error);\n        setError('L·ªói k·∫øt n·ªëi server');\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (flightId) {\n      fetchSeatLayout();\n    }\n\n    // Refresh d·ªØ li·ªáu gh·∫ø m·ªói 5 gi√¢y ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi tr·∫°ng th√°i th·ª±c t·∫ø\n    const interval = setInterval(fetchSeatLayout, 5000);\n    return () => clearInterval(interval);\n  }, [flightId]);\n\n  // Refresh d·ªØ li·ªáu gh·∫ø ngay l·∫≠p t·ª©c khi ng∆∞·ªùi d√πng ch·ªçn gh·∫ø\n  useEffect(() => {\n    if (selectedSeats.length > 0) {\n      const refreshSeatLayout = async () => {\n        try {\n          const response = await fetch(`http://localhost:8080/api/v1/seat-layout/flights/${flightId}/seats`);\n          if (response.ok) {\n            const data = await response.json();\n            setSeatLayout(data.data);\n          }\n        } catch (error) {\n          console.error('L·ªói refresh s∆° ƒë·ªì gh·∫ø:', error);\n        }\n      };\n\n      // Refresh ngay l·∫≠p t·ª©c khi ch·ªçn gh·∫ø\n      refreshSeatLayout();\n    }\n  }, [selectedSeats, flightId]);\n\n  // T√≠nh gi√° c·ªßa m·ªôt gh·∫ø d·ª±a tr√™n h·∫°ng\n  const getSeatPrice = seat => {\n    if (!flightPrices) return 0;\n    switch (seat.seatClass) {\n      case 'first':\n        return flightPrices.firstClassPrice || flightPrices.economyPrice || 0;\n      case 'business':\n        return flightPrices.businessPrice || flightPrices.economyPrice || 0;\n      case 'economy':\n        return flightPrices.economyPrice || 0;\n      default:\n        return flightPrices.economyPrice || 0;\n    }\n  };\n\n  // Format gi√° ti·ªÅn\n  const formatPrice = price => {\n    return new Intl.NumberFormat('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    }).format(price);\n  };\n  const getSeatColor = seat => {\n    // Base color by seat class\n    let baseColor = '';\n    switch (seat.seatClass) {\n      case 'first':\n        baseColor = '#FFD700'; // Yellow/gold for first class\n        break;\n      case 'business':\n        baseColor = '#9333EA'; // Purple for business class\n        break;\n      case 'economy':\n        baseColor = '#3B82F6'; // Blue for economy class\n        break;\n      default:\n        baseColor = '#6B7280';\n      // Gray for unknown class\n    }\n\n    // Override color based on status\n    if (seat.status === 'booked') {\n      return '#EF4444'; // Red for booked seats\n    }\n\n    // If seat is selected by user, show green\n    if (selectedSeats.includes(seat.seatId)) {\n      return '#10B981'; // Green for selected seats\n    }\n    return baseColor;\n  };\n  const handleSeatClick = seat => {\n    if (seat.status === 'booked') {\n      return; // Can't select booked seats\n    }\n    if (selectedSeats.includes(seat.seatId)) {\n      // Deselect seat\n      const newSelectedSeats = selectedSeats.filter(id => id !== seat.seatId);\n      onSeatSelect(newSelectedSeats);\n\n      // T√≠nh l·∫°i t·ªïng gi√° sau khi b·ªè ch·ªçn gh·∫ø\n      if (onSeatPriceChange) {\n        const totalPrice = newSelectedSeats.reduce((sum, seatId) => {\n          const seatInfo = getSeatById(seatId);\n          return sum + (seatInfo ? getSeatPrice(seatInfo) : 0);\n        }, 0);\n        onSeatPriceChange(totalPrice);\n      }\n    } else {\n      // Select seat (check max selections limit)\n      if (selectedSeats.length < maxSelections) {\n        const newSelectedSeats = [...selectedSeats, seat.seatId];\n        onSeatSelect(newSelectedSeats);\n\n        // T√≠nh l·∫°i t·ªïng gi√° sau khi ch·ªçn gh·∫ø\n        if (onSeatPriceChange) {\n          const totalPrice = newSelectedSeats.reduce((sum, seatId) => {\n            const seatInfo = getSeatById(seatId);\n            return sum + (seatInfo ? getSeatPrice(seatInfo) : 0);\n          }, 0);\n          onSeatPriceChange(totalPrice);\n        }\n      }\n    }\n  };\n  const handleSeatHover = seat => {\n    setHoveredSeat(seat);\n  };\n  const handleSeatLeave = () => {\n    setHoveredSeat(null);\n  };\n  const getSeatById = seatId => {\n    if (!seatLayout) return null;\n    for (const row of seatLayout.layout) {\n      for (const seat of row.seats) {\n        if (seat.seatId === seatId) {\n          return seat;\n        }\n      }\n    }\n    return null;\n  };\n  const isSeatSelected = seatId => {\n    return selectedSeats.includes(seatId);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-layout-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"\\u0110ang t\\u1EA3i s\\u01A1 \\u0111\\u1ED3 gh\\u1EBF...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-layout-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this);\n  }\n  if (!seatLayout) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-layout-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u s\\u01A1 \\u0111\\u1ED3 gh\\u1EBF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"seat-layout-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-layout-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Ch\\u1ECDn gh\\u1EBF ng\\u1ED3i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seat-layout-controls\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"refresh-button\",\n          title: \"L\\xE0m m\\u1EDBi s\\u01A1 \\u0111\\u1ED3 gh\\u1EBF\",\n          children: \"\\uD83D\\uDD04 L\\xE0m m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seat-legend\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-color available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Gh\\u1EBF tr\\u1ED1ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-color selected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Gh\\u1EBF \\u0111\\xE3 ch\\u1ECDn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-color booked\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Gh\\u1EBF \\u0111\\xE3 \\u0111\\u1EB7t\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-class-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"class-info first-class\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"class-color first\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"H\\u1EA1ng nh\\u1EA5t (\", flightPrices ? formatPrice(flightPrices.firstClassPrice || flightPrices.economyPrice || 0) : 'N/A', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"class-info business-class\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"class-color business\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Th\\u01B0\\u01A1ng gia (\", flightPrices ? formatPrice(flightPrices.businessPrice || flightPrices.economyPrice || 0) : 'N/A', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"class-info economy-class\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"class-color economy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Ph\\u1ED5 th\\xF4ng (\", flightPrices ? formatPrice(flightPrices.economyPrice || 0) : 'N/A', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"airplane-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"airplane\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"airplane-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cockpit-label\",\n            children: \"COCKPIT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"exit-row\",\n            children: \"EXIT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seat-grid\",\n          children: seatLayout.layout.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seat-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row-number\",\n              children: row.row\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"seats-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left-seats\",\n                children: row.seats.slice(0, 3).map((seat, index) => {\n                  const isWindowSeat = index === 0; // Ch·ªâ gh·∫ø A l√† c·ª≠a s·ªï\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `seat ${isSeatSelected(seat.seatId) ? 'selected' : ''} ${seat.status === 'booked' ? 'booked' : 'available'} ${isWindowSeat ? 'window' : 'aisle-seat'}`,\n                    style: {\n                      backgroundColor: getSeatColor(seat),\n                      cursor: seat.status === 'booked' ? 'not-allowed' : 'pointer'\n                    },\n                    onClick: () => handleSeatClick(seat),\n                    onMouseEnter: () => handleSeatHover(seat),\n                    onMouseLeave: handleSeatLeave,\n                    title: `${seat.seatId} - ${seat.seatClass === 'first' ? 'H·∫°ng nh·∫•t' : seat.seatClass === 'business' ? 'Th∆∞∆°ng gia' : 'Ph·ªï th√¥ng'} - ${isWindowSeat ? 'Gh·∫ø c·ª≠a s·ªï' : 'Gh·∫ø l·ªëi ƒëi'} (${formatPrice(getSeatPrice(seat))})`,\n                    children: seat.seatId\n                  }, seat.seatId, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aisle\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"aisle-label\",\n                  children: \"L\\u1ED1i \\u0111i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right-seats\",\n                children: row.seats.slice(3, 6).map((seat, index) => {\n                  const isWindowSeat = index === 2; // Ch·ªâ gh·∫ø F l√† c·ª≠a s·ªï (index 2 trong slice 3-6)\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `seat ${isSeatSelected(seat.seatId) ? 'selected' : ''} ${seat.status === 'booked' ? 'booked' : 'available'} ${isWindowSeat ? 'window' : 'aisle-seat'}`,\n                    style: {\n                      backgroundColor: getSeatColor(seat),\n                      cursor: seat.status === 'booked' ? 'not-allowed' : 'pointer'\n                    },\n                    onClick: () => handleSeatClick(seat),\n                    onMouseEnter: () => handleSeatHover(seat),\n                    onMouseLeave: handleSeatLeave,\n                    title: `${seat.seatId} - ${seat.seatClass === 'first' ? 'H·∫°ng nh·∫•t' : seat.seatClass === 'business' ? 'Th∆∞∆°ng gia' : 'Ph·ªï th√¥ng'} - ${isWindowSeat ? 'Gh·∫ø c·ª≠a s·ªï' : 'Gh·∫ø l·ªëi ƒëi'} (${formatPrice(getSeatPrice(seat))})`,\n                    children: seat.seatId\n                  }, seat.seatId, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row-number\",\n              children: row.row\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this)]\n          }, row.row, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"airplane-footer\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"exit-row\",\n            children: \"EXIT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), hoveredSeat && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-hover-info\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seat-hover-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seat-hover-title\",\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: hoveredSeat.seatId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seat-hover-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seat-hover-class\",\n            children: [\"H\\u1EA1ng: \", hoveredSeat.seatClass === 'first' ? 'H·∫°ng nh·∫•t' : hoveredSeat.seatClass === 'business' ? 'Th∆∞∆°ng gia' : 'Ph·ªï th√¥ng']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seat-hover-position\",\n            children: [\"V\\u1ECB tr\\xED: \", (() => {\n              let currentRow = null;\n              let seatInRowIndex = null;\n              for (const row of seatLayout.layout) {\n                const seatIndexInRow = row.seats.findIndex(s => s.seatId === hoveredSeat.seatId);\n                if (seatIndexInRow !== -1) {\n                  currentRow = row;\n                  seatInRowIndex = seatIndexInRow;\n                  break;\n                }\n              }\n              if (currentRow && seatInRowIndex !== null) {\n                const isWindowSeat = seatInRowIndex === 0 || seatInRowIndex === 5;\n                return isWindowSeat ? 'Gh·∫ø c·ª≠a s·ªï' : 'Gh·∫ø l·ªëi ƒëi';\n              }\n              return 'Gh·∫ø l·ªëi ƒëi';\n            })()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seat-hover-price\",\n            children: [\"Gi\\xE1: \", formatPrice(getSeatPrice(hoveredSeat))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-selection-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u0110\\xE3 ch\\u1ECDn: \", selectedSeats.length, \"/\", maxSelections, \" gh\\u1EBF\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), selectedSeats.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-seats\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Gh\\u1EBF \\u0111\\xE3 ch\\u1ECDn:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selected-seats-list\",\n          children: selectedSeats.map(seatId => {\n            const seat = getSeatById(seatId);\n\n            // T√¨m v·ªã tr√≠ gh·∫ø trong h√†ng hi·ªán t·∫°i\n            let seatInRowIndex = null;\n            for (const row of seatLayout.layout) {\n              const index = row.seats.findIndex(s => s.seatId === seatId);\n              if (index !== -1) {\n                seatInRowIndex = index;\n                break;\n              }\n            }\n\n            // V·ªõi layout 3+3: ch·ªâ gh·∫ø A (0) v√† F (5) l√† c·ª≠a s·ªï\n            const isWindowSeat = seatInRowIndex !== null && (seatInRowIndex === 0 || seatInRowIndex === 5);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-seat-badge\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"seat-id\",\n                children: seatId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"seat-position\",\n                children: isWindowSeat ? 'ü™ü C·ª≠a s·ªï' : 'üö∂ L·ªëi ƒëi'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"seat-price\",\n                children: [\"(\", formatPrice(seat ? getSeatPrice(seat) : 0), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this)]\n            }, seatId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n};\n_s(SeatLayout, \"D0d0Z/Olq9TGFIl2lSk0FahRNNY=\");\n_c = SeatLayout;\nexport default SeatLayout;\nvar _c;\n$RefreshReg$(_c, \"SeatLayout\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","SeatLayout","flightId","selectedSeats","onSeatSelect","passengerCount","maxSelections","flightPrices","onSeatPriceChange","_s","conflictWarning","setConflictWarning","length","seatLayout","conflictingSeats","filter","seatId","seat","getSeatById","status","join","fetchSeatLayout","setLoading","response","fetch","ok","data","json","setSeatLayout","setError","error","console","interval","setInterval","clearInterval","refreshSeatLayout","getSeatPrice","seatClass","firstClassPrice","economyPrice","businessPrice","formatPrice","price","Intl","NumberFormat","style","currency","format","getSeatColor","baseColor","includes","handleSeatClick","newSelectedSeats","id","totalPrice","reduce","sum","seatInfo","handleSeatHover","setHoveredSeat","handleSeatLeave","row","layout","seats","isSeatSelected","loading","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","title","map","rowIndex","slice","index","isWindowSeat","backgroundColor","cursor","onMouseEnter","onMouseLeave","hoveredSeat","currentRow","seatInRowIndex","seatIndexInRow","findIndex","s","_c","$RefreshReg$"],"sources":["D:/Airticket/frontend/src/components/SeatLayout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './SeatLayout.css';\n\nconst SeatLayout = ({\n  flightId,\n  selectedSeats = [],\n  onSeatSelect,\n  passengerCount = 1,\n  maxSelections = 1,\n  flightPrices = null, // Th√™m th√¥ng tin gi√° v√© t·ª´ flight\n  onSeatPriceChange // Callback khi gi√° gh·∫ø thay ƒë·ªïi\n}) => {\n  const [conflictWarning, setConflictWarning] = useState(null);\n\n  // Ki·ªÉm tra xung ƒë·ªôt gh·∫ø sau m·ªói l·∫ßn refresh\n  useEffect(() => {\n    if (selectedSeats.length > 0 && seatLayout) {\n      const conflictingSeats = selectedSeats.filter(seatId => {\n        const seat = getSeatById(seatId);\n        return seat && seat.status === 'booked';\n      });\n\n      if (conflictingSeats.length > 0) {\n        setConflictWarning(`Gh·∫ø ${conflictingSeats.join(', ')} ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t b·ªüi ng∆∞·ªùi kh√°c. Vui l√≤ng ch·ªçn gh·∫ø kh√°c.`);\n      } else {\n        setConflictWarning(null);\n      }\n    }\n  }, [selectedSeats, seatLayout]);\n\n  useEffect(() => {\n    const fetchSeatLayout = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`http://localhost:8080/api/v1/seat-layout/flights/${flightId}/seats`);\n        if (response.ok) {\n          const data = await response.json();\n          setSeatLayout(data.data);\n        } else {\n          setError('Kh√¥ng th·ªÉ t·∫£i s∆° ƒë·ªì gh·∫ø');\n        }\n      } catch (error) {\n        console.error('L·ªói t·∫£i s∆° ƒë·ªì gh·∫ø:', error);\n        setError('L·ªói k·∫øt n·ªëi server');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (flightId) {\n      fetchSeatLayout();\n    }\n\n    // Refresh d·ªØ li·ªáu gh·∫ø m·ªói 5 gi√¢y ƒë·ªÉ ƒë·ªìng b·ªô v·ªõi tr·∫°ng th√°i th·ª±c t·∫ø\n    const interval = setInterval(fetchSeatLayout, 5000);\n\n    return () => clearInterval(interval);\n  }, [flightId]);\n\n  // Refresh d·ªØ li·ªáu gh·∫ø ngay l·∫≠p t·ª©c khi ng∆∞·ªùi d√πng ch·ªçn gh·∫ø\n  useEffect(() => {\n    if (selectedSeats.length > 0) {\n      const refreshSeatLayout = async () => {\n        try {\n          const response = await fetch(`http://localhost:8080/api/v1/seat-layout/flights/${flightId}/seats`);\n          if (response.ok) {\n            const data = await response.json();\n            setSeatLayout(data.data);\n          }\n        } catch (error) {\n          console.error('L·ªói refresh s∆° ƒë·ªì gh·∫ø:', error);\n        }\n      };\n\n      // Refresh ngay l·∫≠p t·ª©c khi ch·ªçn gh·∫ø\n      refreshSeatLayout();\n    }\n  }, [selectedSeats, flightId]);\n\n  // T√≠nh gi√° c·ªßa m·ªôt gh·∫ø d·ª±a tr√™n h·∫°ng\n  const getSeatPrice = (seat) => {\n    if (!flightPrices) return 0;\n\n    switch (seat.seatClass) {\n      case 'first':\n        return flightPrices.firstClassPrice || flightPrices.economyPrice || 0;\n      case 'business':\n        return flightPrices.businessPrice || flightPrices.economyPrice || 0;\n      case 'economy':\n        return flightPrices.economyPrice || 0;\n      default:\n        return flightPrices.economyPrice || 0;\n    }\n  };\n\n  // Format gi√° ti·ªÅn\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(price);\n  };\n\n  const getSeatColor = (seat) => {\n    // Base color by seat class\n    let baseColor = '';\n\n    switch (seat.seatClass) {\n      case 'first':\n        baseColor = '#FFD700'; // Yellow/gold for first class\n        break;\n      case 'business':\n        baseColor = '#9333EA'; // Purple for business class\n        break;\n      case 'economy':\n        baseColor = '#3B82F6'; // Blue for economy class\n        break;\n      default:\n        baseColor = '#6B7280'; // Gray for unknown class\n    }\n\n    // Override color based on status\n    if (seat.status === 'booked') {\n      return '#EF4444'; // Red for booked seats\n    }\n\n    // If seat is selected by user, show green\n    if (selectedSeats.includes(seat.seatId)) {\n      return '#10B981'; // Green for selected seats\n    }\n\n    return baseColor;\n  };\n\n  const handleSeatClick = (seat) => {\n    if (seat.status === 'booked') {\n      return; // Can't select booked seats\n    }\n\n    if (selectedSeats.includes(seat.seatId)) {\n      // Deselect seat\n      const newSelectedSeats = selectedSeats.filter(id => id !== seat.seatId);\n      onSeatSelect(newSelectedSeats);\n\n      // T√≠nh l·∫°i t·ªïng gi√° sau khi b·ªè ch·ªçn gh·∫ø\n      if (onSeatPriceChange) {\n        const totalPrice = newSelectedSeats.reduce((sum, seatId) => {\n          const seatInfo = getSeatById(seatId);\n          return sum + (seatInfo ? getSeatPrice(seatInfo) : 0);\n        }, 0);\n        onSeatPriceChange(totalPrice);\n      }\n    } else {\n      // Select seat (check max selections limit)\n      if (selectedSeats.length < maxSelections) {\n        const newSelectedSeats = [...selectedSeats, seat.seatId];\n        onSeatSelect(newSelectedSeats);\n\n        // T√≠nh l·∫°i t·ªïng gi√° sau khi ch·ªçn gh·∫ø\n        if (onSeatPriceChange) {\n          const totalPrice = newSelectedSeats.reduce((sum, seatId) => {\n            const seatInfo = getSeatById(seatId);\n            return sum + (seatInfo ? getSeatPrice(seatInfo) : 0);\n          }, 0);\n          onSeatPriceChange(totalPrice);\n        }\n      }\n    }\n  };\n\n  const handleSeatHover = (seat) => {\n    setHoveredSeat(seat);\n  };\n\n  const handleSeatLeave = () => {\n    setHoveredSeat(null);\n  };\n\n  const getSeatById = (seatId) => {\n    if (!seatLayout) return null;\n    for (const row of seatLayout.layout) {\n      for (const seat of row.seats) {\n        if (seat.seatId === seatId) {\n          return seat;\n        }\n      }\n    }\n    return null;\n  };\n\n  const isSeatSelected = (seatId) => {\n    return selectedSeats.includes(seatId);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"seat-layout-container\">\n        <div className=\"loading\">ƒêang t·∫£i s∆° ƒë·ªì gh·∫ø...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"seat-layout-container\">\n        <div className=\"error\">{error}</div>\n      </div>\n    );\n  }\n\n  if (!seatLayout) {\n    return (\n      <div className=\"seat-layout-container\">\n        <div className=\"error\">Kh√¥ng c√≥ d·ªØ li·ªáu s∆° ƒë·ªì gh·∫ø</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"seat-layout-container\">\n      <div className=\"seat-layout-header\">\n        <h3>Ch·ªçn gh·∫ø ng·ªìi</h3>\n        <div className=\"seat-layout-controls\">\n          <button\n            onClick={() => window.location.reload()}\n            className=\"refresh-button\"\n            title=\"L√†m m·ªõi s∆° ƒë·ªì gh·∫ø\"\n          >\n            üîÑ L√†m m·ªõi\n          </button>\n        </div>\n        <div className=\"seat-legend\">\n          <div className=\"legend-item\">\n            <div className=\"legend-color available\"></div>\n            <span>Gh·∫ø tr·ªëng</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-color selected\"></div>\n            <span>Gh·∫ø ƒë√£ ch·ªçn</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-color booked\"></div>\n            <span>Gh·∫ø ƒë√£ ƒë·∫∑t</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"seat-class-info\">\n        <div className=\"class-info first-class\">\n          <div className=\"class-color first\"></div>\n          <span>H·∫°ng nh·∫•t ({flightPrices ? formatPrice(flightPrices.firstClassPrice || flightPrices.economyPrice || 0) : 'N/A'})</span>\n        </div>\n        <div className=\"class-info business-class\">\n          <div className=\"class-color business\"></div>\n          <span>Th∆∞∆°ng gia ({flightPrices ? formatPrice(flightPrices.businessPrice || flightPrices.economyPrice || 0) : 'N/A'})</span>\n        </div>\n        <div className=\"class-info economy-class\">\n          <div className=\"class-color economy\"></div>\n          <span>Ph·ªï th√¥ng ({flightPrices ? formatPrice(flightPrices.economyPrice || 0) : 'N/A'})</span>\n        </div>\n      </div>\n\n      <div className=\"airplane-container\">\n        <div className=\"airplane\">\n          {/* Cockpit Area */}\n          <div className=\"airplane-header\">\n            <div className=\"cockpit-label\">COCKPIT</div>\n            <div className=\"exit-row\">EXIT</div>\n          </div>\n\n          {/* Main Cabin Layout */}\n          <div className=\"seat-grid\">\n            {seatLayout.layout.map((row, rowIndex) => (\n              <div key={row.row} className=\"seat-row\">\n                <div className=\"row-number\">{row.row}</div>\n\n                <div className=\"seats-container\">\n                  {/* Left seats (A, B, C) */}\n                  <div className=\"left-seats\">\n                    {row.seats.slice(0, 3).map((seat, index) => {\n                      const isWindowSeat = index === 0; // Ch·ªâ gh·∫ø A l√† c·ª≠a s·ªï\n                      return (\n                        <div\n                          key={seat.seatId}\n                          className={`seat ${isSeatSelected(seat.seatId) ? 'selected' : ''} ${seat.status === 'booked' ? 'booked' : 'available'} ${isWindowSeat ? 'window' : 'aisle-seat'}`}\n                          style={{\n                            backgroundColor: getSeatColor(seat),\n                            cursor: seat.status === 'booked' ? 'not-allowed' : 'pointer'\n                          }}\n                          onClick={() => handleSeatClick(seat)}\n                          onMouseEnter={() => handleSeatHover(seat)}\n                          onMouseLeave={handleSeatLeave}\n                          title={`${seat.seatId} - ${seat.seatClass === 'first' ? 'H·∫°ng nh·∫•t' : seat.seatClass === 'business' ? 'Th∆∞∆°ng gia' : 'Ph·ªï th√¥ng'} - ${isWindowSeat ? 'Gh·∫ø c·ª≠a s·ªï' : 'Gh·∫ø l·ªëi ƒëi'} (${formatPrice(getSeatPrice(seat))})`}\n                        >\n                          {seat.seatId}\n                        </div>\n                      );\n                    })}\n                  </div>\n\n                  {/* Center aisle */}\n                  <div className=\"aisle\">\n                    <div className=\"aisle-label\">L·ªëi ƒëi</div>\n                  </div>\n\n                  {/* Right seats (D, E, F) */}\n                  <div className=\"right-seats\">\n                    {row.seats.slice(3, 6).map((seat, index) => {\n                      const isWindowSeat = index === 2; // Ch·ªâ gh·∫ø F l√† c·ª≠a s·ªï (index 2 trong slice 3-6)\n                      return (\n                        <div\n                          key={seat.seatId}\n                          className={`seat ${isSeatSelected(seat.seatId) ? 'selected' : ''} ${seat.status === 'booked' ? 'booked' : 'available'} ${isWindowSeat ? 'window' : 'aisle-seat'}`}\n                          style={{\n                            backgroundColor: getSeatColor(seat),\n                            cursor: seat.status === 'booked' ? 'not-allowed' : 'pointer'\n                          }}\n                          onClick={() => handleSeatClick(seat)}\n                          onMouseEnter={() => handleSeatHover(seat)}\n                          onMouseLeave={handleSeatLeave}\n                          title={`${seat.seatId} - ${seat.seatClass === 'first' ? 'H·∫°ng nh·∫•t' : seat.seatClass === 'business' ? 'Th∆∞∆°ng gia' : 'Ph·ªï th√¥ng'} - ${isWindowSeat ? 'Gh·∫ø c·ª≠a s·ªï' : 'Gh·∫ø l·ªëi ƒëi'} (${formatPrice(getSeatPrice(seat))})`}\n                        >\n                          {seat.seatId}\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n\n                <div className=\"row-number\">{row.row}</div>\n              </div>\n            ))}\n          </div>\n\n          {/* Tail section */}\n          <div className=\"airplane-footer\">\n            <div className=\"exit-row\">EXIT</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Hi·ªÉn th·ªã th√¥ng tin gh·∫ø ƒëang hover */}\n      {hoveredSeat && (\n        <div className=\"seat-hover-info\">\n          <div className=\"seat-hover-card\">\n            <div className=\"seat-hover-title\">\n              <strong>{hoveredSeat.seatId}</strong>\n            </div>\n            <div className=\"seat-hover-details\">\n              <div className=\"seat-hover-class\">\n                H·∫°ng: {hoveredSeat.seatClass === 'first' ? 'H·∫°ng nh·∫•t' : hoveredSeat.seatClass === 'business' ? 'Th∆∞∆°ng gia' : 'Ph·ªï th√¥ng'}\n              </div>\n              <div className=\"seat-hover-position\">\n                V·ªã tr√≠: {(() => {\n                  let currentRow = null;\n                  let seatInRowIndex = null;\n\n                  for (const row of seatLayout.layout) {\n                    const seatIndexInRow = row.seats.findIndex(s => s.seatId === hoveredSeat.seatId);\n                    if (seatIndexInRow !== -1) {\n                      currentRow = row;\n                      seatInRowIndex = seatIndexInRow;\n                      break;\n                    }\n                  }\n\n                  if (currentRow && seatInRowIndex !== null) {\n                    const isWindowSeat = seatInRowIndex === 0 || seatInRowIndex === 5;\n                    return isWindowSeat ? 'Gh·∫ø c·ª≠a s·ªï' : 'Gh·∫ø l·ªëi ƒëi';\n                  }\n\n                  return 'Gh·∫ø l·ªëi ƒëi';\n                })()}\n              </div>\n              <div className=\"seat-hover-price\">\n                Gi√°: {formatPrice(getSeatPrice(hoveredSeat))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"seat-selection-info\">\n        <p>ƒê√£ ch·ªçn: {selectedSeats.length}/{maxSelections} gh·∫ø</p>\n        {selectedSeats.length > 0 && (\n          <div className=\"selected-seats\">\n            <p><strong>Gh·∫ø ƒë√£ ch·ªçn:</strong></p>\n            <div className=\"selected-seats-list\">\n              {selectedSeats.map(seatId => {\n                const seat = getSeatById(seatId);\n\n                // T√¨m v·ªã tr√≠ gh·∫ø trong h√†ng hi·ªán t·∫°i\n                let seatInRowIndex = null;\n                for (const row of seatLayout.layout) {\n                  const index = row.seats.findIndex(s => s.seatId === seatId);\n                  if (index !== -1) {\n                    seatInRowIndex = index;\n                    break;\n                  }\n                }\n\n                // V·ªõi layout 3+3: ch·ªâ gh·∫ø A (0) v√† F (5) l√† c·ª≠a s·ªï\n                const isWindowSeat = seatInRowIndex !== null &&\n                  (seatInRowIndex === 0 || seatInRowIndex === 5);\n\n                return (\n                  <div key={seatId} className=\"selected-seat-badge\">\n                    <span className=\"seat-id\">{seatId}</span>\n                    <span className=\"seat-position\">{isWindowSeat ? 'ü™ü C·ª≠a s·ªï' : 'üö∂ L·ªëi ƒëi'}</span>\n                    <span className=\"seat-price\">({formatPrice(seat ? getSeatPrice(seat) : 0)})</span>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SeatLayout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}